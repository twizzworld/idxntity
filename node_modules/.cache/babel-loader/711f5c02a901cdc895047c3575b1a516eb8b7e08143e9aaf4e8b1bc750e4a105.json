{"ast":null,"code":"import _slicedToArray from \"/Users/rizzytwizzy/Projects/idxntity/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutProperties from \"/Users/rizzytwizzy/Projects/idxntity/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"opacity\", \"radiusTop\", \"radiusBottom\", \"depthBuffer\", \"color\", \"distance\", \"angle\", \"attenuation\", \"anglePower\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector3, CylinderGeometry, Matrix4 } from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { SpotLightMaterial } from '../materials/SpotLightMaterial.js';\nvar vec = new Vector3();\nvar SpotLight = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$opacity = _ref.opacity,\n    opacity = _ref$opacity === void 0 ? 1 : _ref$opacity,\n    radiusTop = _ref.radiusTop,\n    radiusBottom = _ref.radiusBottom,\n    depthBuffer = _ref.depthBuffer,\n    _ref$color = _ref.color,\n    color = _ref$color === void 0 ? 'white' : _ref$color,\n    _ref$distance = _ref.distance,\n    distance = _ref$distance === void 0 ? 5 : _ref$distance,\n    _ref$angle = _ref.angle,\n    angle = _ref$angle === void 0 ? 0.15 : _ref$angle,\n    _ref$attenuation = _ref.attenuation,\n    attenuation = _ref$attenuation === void 0 ? 5 : _ref$attenuation,\n    _ref$anglePower = _ref.anglePower,\n    anglePower = _ref$anglePower === void 0 ? 5 : _ref$anglePower,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var mesh = React.useRef(null);\n  var size = useThree(function (state) {\n    return state.size;\n  });\n  var camera = useThree(function (state) {\n    return state.camera;\n  });\n  var dpr = useThree(function (state) {\n    return state.viewport.dpr;\n  });\n  var _React$useState = React.useState(function () {\n      return new SpotLightMaterial();\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 1),\n    material = _React$useState2[0];\n  radiusTop = radiusTop === undefined ? 0.1 : radiusTop;\n  radiusBottom = radiusBottom === undefined ? angle * 7 : radiusBottom;\n  useFrame(function () {\n    material.uniforms.spotPosition.value.copy(mesh.current.getWorldPosition(vec));\n    mesh.current.lookAt(mesh.current.parent.target.getWorldPosition(vec));\n  });\n  var geom = React.useMemo(function () {\n    var geometry = new CylinderGeometry(radiusTop, radiusBottom, distance, 128, 64, true);\n    geometry.applyMatrix4(new Matrix4().makeTranslation(0, -distance / 2, 0));\n    geometry.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\n    return geometry;\n  }, [angle, distance, radiusTop, radiusBottom]);\n  return /*#__PURE__*/React.createElement(\"spotLight\", _extends({\n    ref: ref,\n    angle: angle,\n    color: color,\n    distance: distance\n  }, props), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    geometry: geom,\n    raycast: function raycast() {\n      return null;\n    }\n  }, /*#__PURE__*/React.createElement(\"primitive\", {\n    object: material,\n    attach: \"material\",\n    \"uniforms-opacity-value\": opacity,\n    \"uniforms-lightColor-value\": color,\n    \"uniforms-attenuation-value\": attenuation,\n    \"uniforms-anglePower-value\": anglePower,\n    \"uniforms-depth-value\": depthBuffer,\n    \"uniforms-cameraNear-value\": camera.near,\n    \"uniforms-cameraFar-value\": camera.far,\n    \"uniforms-resolution-value\": depthBuffer ? [size.width * dpr, size.height * dpr] : [0, 0]\n  })));\n});\nexport { SpotLight };","map":{"version":3,"names":["_extends","React","Vector3","CylinderGeometry","Matrix4","useThree","useFrame","SpotLightMaterial","vec","SpotLight","forwardRef","_ref","ref","_ref$opacity","opacity","radiusTop","radiusBottom","depthBuffer","_ref$color","color","_ref$distance","distance","_ref$angle","angle","_ref$attenuation","attenuation","_ref$anglePower","anglePower","props","_objectWithoutProperties","_excluded","mesh","useRef","size","state","camera","dpr","viewport","_React$useState","useState","_React$useState2","_slicedToArray","material","undefined","uniforms","spotPosition","value","copy","current","getWorldPosition","lookAt","parent","target","geom","useMemo","geometry","applyMatrix4","makeTranslation","makeRotationX","Math","PI","createElement","raycast","object","attach","near","far","width","height"],"sources":["/Users/rizzytwizzy/Projects/idxntity/node_modules/@react-three/drei/core/SpotLight.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector3, CylinderGeometry, Matrix4 } from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { SpotLightMaterial } from '../materials/SpotLightMaterial.js';\n\nconst vec = new Vector3();\nconst SpotLight = /*#__PURE__*/React.forwardRef(({\n  opacity = 1,\n  radiusTop,\n  radiusBottom,\n  depthBuffer,\n  color = 'white',\n  distance = 5,\n  angle = 0.15,\n  attenuation = 5,\n  anglePower = 5,\n  ...props\n}, ref) => {\n  const mesh = React.useRef(null);\n  const size = useThree(state => state.size);\n  const camera = useThree(state => state.camera);\n  const dpr = useThree(state => state.viewport.dpr);\n  const [material] = React.useState(() => new SpotLightMaterial());\n  radiusTop = radiusTop === undefined ? 0.1 : radiusTop;\n  radiusBottom = radiusBottom === undefined ? angle * 7 : radiusBottom;\n  useFrame(() => {\n    material.uniforms.spotPosition.value.copy(mesh.current.getWorldPosition(vec));\n    mesh.current.lookAt(mesh.current.parent.target.getWorldPosition(vec));\n  });\n  const geom = React.useMemo(() => {\n    const geometry = new CylinderGeometry(radiusTop, radiusBottom, distance, 128, 64, true);\n    geometry.applyMatrix4(new Matrix4().makeTranslation(0, -distance / 2, 0));\n    geometry.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\n    return geometry;\n  }, [angle, distance, radiusTop, radiusBottom]);\n  return /*#__PURE__*/React.createElement(\"spotLight\", _extends({\n    ref: ref,\n    angle: angle,\n    color: color,\n    distance: distance\n  }, props), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    geometry: geom,\n    raycast: () => null\n  }, /*#__PURE__*/React.createElement(\"primitive\", {\n    object: material,\n    attach: \"material\",\n    \"uniforms-opacity-value\": opacity,\n    \"uniforms-lightColor-value\": color,\n    \"uniforms-attenuation-value\": attenuation,\n    \"uniforms-anglePower-value\": anglePower,\n    \"uniforms-depth-value\": depthBuffer,\n    \"uniforms-cameraNear-value\": camera.near,\n    \"uniforms-cameraFar-value\": camera.far,\n    \"uniforms-resolution-value\": depthBuffer ? [size.width * dpr, size.height * dpr] : [0, 0]\n  })));\n});\n\nexport { SpotLight };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}