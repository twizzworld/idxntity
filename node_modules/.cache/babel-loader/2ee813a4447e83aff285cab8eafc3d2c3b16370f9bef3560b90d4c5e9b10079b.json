{"ast":null,"code":"import _slicedToArray from \"/Users/rizzytwizzy/Projects/idxntity/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutProperties from \"/Users/rizzytwizzy/Projects/idxntity/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"children\", \"controls\", \"shadows\", \"adjustCamera\", \"environment\", \"intensity\", \"preset\", \"shadowBias\", \"contactShadow\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\nvar presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage(_ref) {\n  var children = _ref.children,\n    controls = _ref.controls,\n    _ref$shadows = _ref.shadows,\n    shadows = _ref$shadows === void 0 ? true : _ref$shadows,\n    _ref$adjustCamera = _ref.adjustCamera,\n    adjustCamera = _ref$adjustCamera === void 0 ? true : _ref$adjustCamera,\n    _ref$environment = _ref.environment,\n    environment = _ref$environment === void 0 ? 'city' : _ref$environment,\n    _ref$intensity = _ref.intensity,\n    intensity = _ref$intensity === void 0 ? 1 : _ref$intensity,\n    _ref$preset = _ref.preset,\n    preset = _ref$preset === void 0 ? 'rembrandt' : _ref$preset,\n    _ref$shadowBias = _ref.shadowBias,\n    shadowBias = _ref$shadowBias === void 0 ? 0 : _ref$shadowBias,\n    _ref$contactShadow = _ref.contactShadow,\n    contactShadow = _ref$contactShadow === void 0 ? {\n      blur: 2,\n      opacity: 0.5,\n      position: [0, 0, 0]\n    } : _ref$contactShadow,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var config = presets[preset];\n  var camera = useThree(function (state) {\n    return state.camera;\n  }); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  var defaultControls = useThree(function (state) {\n    return state.controls;\n  });\n  var outer = React.useRef(null);\n  var inner = React.useRef(null);\n  var _React$useState = React.useState({\n      radius: 0,\n      width: 0,\n      height: 0\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    _React$useState2$ = _React$useState2[0],\n    radius = _React$useState2$.radius,\n    width = _React$useState2$.width,\n    height = _React$useState2$.height,\n    set = _React$useState2[1];\n  React.useLayoutEffect(function () {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    var box3 = new THREE.Box3().setFromObject(inner.current);\n    var center = new THREE.Vector3();\n    var sphere = new THREE.Sphere();\n    var height = box3.max.y - box3.min.y;\n    var width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width: width,\n      height: height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(function () {\n    if (adjustCamera) {\n      var y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      var ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    }\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, _extends({\n    width: radius * 2,\n    height: radius * 2,\n    far: radius / 2\n  }, contactShadow)), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\nexport { Stage };","map":{"version":3,"names":["_extends","React","THREE","useThree","Environment","ContactShadows","presets","rembrandt","main","fill","portrait","upfront","soft","Stage","_ref","children","controls","_ref$shadows","shadows","_ref$adjustCamera","adjustCamera","_ref$environment","environment","_ref$intensity","intensity","_ref$preset","preset","_ref$shadowBias","shadowBias","_ref$contactShadow","contactShadow","blur","opacity","position","props","_objectWithoutProperties","_excluded","config","camera","state","defaultControls","outer","useRef","inner","_React$useState","useState","radius","width","height","_React$useState2","_slicedToArray","_React$useState2$","set","useLayoutEffect","current","updateWorldMatrix","box3","Box3","setFromObject","center","Vector3","sphere","Sphere","max","y","min","x","getCenter","getBoundingSphere","z","near","far","Math","lookAt","ctrl","target","update","createElement","ref","penumbra","castShadow"],"sources":["/Users/rizzytwizzy/Projects/idxntity/node_modules/@react-three/drei/core/Stage.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\n\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage({\n  children,\n  controls,\n  shadows = true,\n  adjustCamera = true,\n  environment = 'city',\n  intensity = 1,\n  preset = 'rembrandt',\n  shadowBias = 0,\n  contactShadow = {\n    blur: 2,\n    opacity: 0.5,\n    position: [0, 0, 0]\n  },\n  ...props\n}) {\n  const config = presets[preset];\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const defaultControls = useThree(state => state.controls);\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  const [{\n    radius,\n    width,\n    height\n  }, set] = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  });\n  React.useLayoutEffect(() => {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    const box3 = new THREE.Box3().setFromObject(inner.current);\n    const center = new THREE.Vector3();\n    const sphere = new THREE.Sphere();\n    const height = box3.max.y - box3.min.y;\n    const width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width,\n      height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(() => {\n    if (adjustCamera) {\n      const y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      const ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    }\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, _extends({\n    width: radius * 2,\n    height: radius * 2,\n    far: radius / 2\n  }, contactShadow)), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\n\nexport { Stage };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}